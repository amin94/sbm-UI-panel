function displayCampaigns(a){for(var t,e=1,i=0;i<a.length;i++)"active"===a[i].status?t='<span> فعال </span> <div class="greenCircle"></div>':"deActive"===a[i].status&&(t='<span> غیر فعال </span> <div class="grayCircle"></div>'),$("#campaignsDataBody").append('<tr style="position: relative" id="cid'+a[i].cId+'"><td class="table-website-td center">'+a[i].name+'<a href="javascript:;" data-cid="'+a[i].cId+'" name="modalLink" onclick="openCampaignModal('+e+')" class="more"> '+a[i].name+' </a></td><td class="table-website-td center">'+a[i].modifyDate+'<a href="javascript:;" data-cid="'+a[i].cId+'" name="modalLink" onclick="openCampaignModal('+e+')" class="more"> '+a[i].modifyDate+' </a></td><td class="center campaignStatus"> '+t+' <a href="javascript:;" data-cid="'+a[i].cId+'" name="modalLink" onclick="openCampaignModal('+e+')" class="more"> '+a[i].name+' </a></td> <input type="hidden" name="cidValue'+e+'" value="'+a[i].cId+'"> </tr>'),e+=1}function callbackAjaxReq(a,t){if("getCampaigns"===t)"campaignsGot"===a.status&&displayCampaigns(a.campaignsData);else if("eachCampaignDetail"===t&&"campaignGot"===a.status){$(".loadingBar").removeClass("active"),$(".modalOption").addClass("openModal"),$(".mask").fadeIn(),$("#modalOptionBody").attr("data-cid",a.campaignsDetailData.cId),"active"===a.campaignsDetailData.status?($("input[name=campaignStatusSwitch]").prop("checked",!0),$("input[name=campaignStatusSwitch]").data("switch",!0),$(".simple-switch-outter").removeClass("unChecked"),$(".simple-switch-outter").addClass("checked")):"deActive"===a.campaignsDetailData.status&&($("input[name=campaignStatusSwitch]").prop("checked",!1),$("input[name=campaignStatusSwitch]").data("switch",!1),$(".simple-switch-outter").addClass("unChecked"),$(".simple-switch-outter").removeClass("checked")),$("a[name=deleteCampaign]").attr("data-cid",a.campaignsDetailData.cId),document.getElementById("campaignID").innerHTML=a.campaignsDetailData.cId,document.getElementById("campaignDetailName").innerHTML=a.campaignsDetailData.campaignName,document.getElementById("campaignPageViews").innerHTML=a.campaignsDetailData.pageViews,document.getElementById("campaignVisitors").innerHTML=a.campaignsDetailData.visitorCount,document.getElementById("campaignClicks").innerHTML=a.campaignsDetailData.clicks,document.getElementById("campaignContactsCount").innerHTML=a.campaignsDetailData.contactCount,$("a[name=editCampaign]").attr("href","http://amins-macbook-pro.local:5757/sabetmikonimv2/campaign/edit.php?cid="+a.campaignsDetailData.cId),$(".listItem").remove();for(var e=a.campaignsDetailData.captureLinks,i=0;i<e.length;i++)$("#campaignCaptureLinks").append('<div class="listItem"> <a href="'+e[i].formLink+'" target="_blank" rel="nofollow"> '+e[i].formLink+" </a> </div>");for(var n=a.campaignsDetailData.displayPages,i=0;i<n.length;i++)$("#campaignDisplayLinks").append('<div class="listItem"> <a href="'+n[i].formLink+'" target="_blank" rel="nofollow"> '+n[i].formLink+" </a> </div>")}}function openCampaignModal(a){$(".loadingBar").addClass("active");var t=$('input[name="cidValue'+a+'"]').val(),e=getCookie("sbm_token"),i={cookie:e,cId:t};ajaxReq(i,"https://api.sabetmikonim.com/panel/get-campaign/","eachCampaignDetail")}$(document).ready(function(){var a=getCookie("sbm_token"),t={cookie:a};ajaxReq(t,"https://api.sabetmikonim.com/panel/get-campaigns/","getCampaigns"),$("input[name=campaignStatus]").click(function(){var a=$(this).attr("id");if(1==$(this).prop("checked")){var t="active";$("#cid"+a+" .campaignStatus span").text("فعال"),$("#cid"+a+" .grayCircle").addClass("greenCircle"),$("#cid"+a+" .greenCircle").removeClass("grayCircle")}else t="deactive",$("#cid"+a+" .campaignStatus span").text("غیرفعال"),$("#cid"+a+" .greenCircle").addClass("grayCircle"),$("#cid"+a+" .grayCircle").removeClass("greenCircle");var e={update:"status",cid:a,cidStatus:t};$.ajax({type:"POST",url:"http://amins-macbook-pro.local:5757/sabetmikonimv2/campaign/update.php",data:e,dataType:"json",encode:!0}).done(function(a){}).fail(function(a){console.log(a),$(".submit_txt").delay(200).fadeIn("fast"),$(".process_txt").fadeOut("fast"),$(".signup_btn").addClass("btn-primary"),$(".signup_btn").removeClass("signup_btn_process"),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",type:"error",confirmButtonText:"دوباره تلاش کنید"})})}),$("a[name=deleteCampaign]").click(function(a){a.preventDefault();var t=$(this).attr("href"),e={update:"deleteCampaign",cid:t};$.ajax({type:"POST",url:"http://amins-macbook-pro.local:5757/sabetmikonimv2/campaign/update.php",data:e,dataType:"json",encode:!0}).done(function(a){a.success&&(window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/app.php")}).fail(function(a){console.log(a),$(".submit_txt").delay(200).fadeIn("fast"),$(".process_txt").fadeOut("fast"),$(".signup_btn").addClass("btn-primary"),$(".signup_btn").removeClass("signup_btn_process"),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",type:"error",confirmButtonText:"دوباره تلاش کنید"})})})});