function getCookie(e){for(var o=e+"=",t=document.cookie.split(";"),a=0;a<t.length;a++){for(var i=t[a];" "==i.charAt(0);)i=i.substring(1);if(0==i.indexOf(o))return i.substring(o.length,i.length)}return""}function checkCookie(e){var o=getCookie(e);return""!=o?"cookieSet":"cookieNotSet"}function ajaxReq(e,o,t,a,i){var n,r;(""===i||i||"undefined"==typeof i)&&$(".loadingBar").addClass("active"),n=JSON.stringify(e),r={x:n},console.log(r),$.ajax({type:"POST",url:o,data:r,dataType:"json",async:!0,encode:!0}).done(function(e){$(".loadingBar").removeClass("active"),console.log("ok! Status:"+e.status),console.log(e),"logOut"===t?"loggedOut"===e.status?(Cookies.remove("sbm_token",{path:"/"}),Cookies.remove("dId",{path:"/"}),Cookies.remove("cId",{path:"/"}),window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/"):swal({title:"خطا!",text:" خطایی رخ داده است! ",icon:"error",button:"تلاش مجدد"}):"getHeaderProfileData"===t?"requestDone"===e.status&&(document.getElementById("headerProfileName").innerHTML=e.userName):"securityError"===e.status?(Cookies.remove("sbm_token",{path:"/"}),Cookies.remove("dId",{path:"/"}),Cookies.remove("cId",{path:"/"}),swal({title:"خطا!",text:" خطای امنیتی رخ داده است! ",icon:"error",button:"تلاش مجدد"}),setTimeout(function(){window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/"},800)):callbackAjaxReq(e,t,a)}).fail(function(e){$(".loadingBar").removeClass("active"),console.log("no! "+e.status),console.log(e),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",icon:"error",button:"تماس با پشتیبانی: ۲۸۴۲۵۷۳۳ - ۰۲۱"})})}$(document).ready(function(){var e=window.location.href;if("cookieNotSet"===checkCookie("sbm_token")?(Cookies.set("redirect_url",e,{expires:1,path:"/"}),window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/index.php?redirect=true"):"cookieSet"===checkCookie("sbm_token")||(Cookies.set("redirect_url",e,{expires:1,path:"/"}),window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/index.php?redirect=true"),"getStart"!==page){var o=getCookie("sbm_token"),t={cookie:o};ajaxReq(t,"https://api.sabetmikonim.com/panel/get-profile/","getHeaderProfileData")}$("a[name=logOutPanel]").click(function(e){e.preventDefault();var o=getCookie("sbm_token"),t={cookie:o};ajaxReq(t,"https://api.sabetmikonim.com/panel/logout/","logOut")})});