function getCookie(o){for(var e=o+"=",t=document.cookie.split(";"),i=0;i<t.length;i++){for(var a=t[i];" "==a.charAt(0);)a=a.substring(1);if(0==a.indexOf(e))return a.substring(e.length,a.length)}return""}function checkCookie(o){var e=getCookie(o);return""!=e?"cookieSet":"cookieNotSet"}function ajaxReq(o,e,t){var i,a;$(".loadingBar").addClass("active"),i=JSON.stringify(o),a={x:i},console.log(a),$.ajax({type:"POST",url:e,data:a,dataType:"json",async:!0,encode:!0}).done(function(o){$(".loadingBar").removeClass("active"),console.log("ok! Status:"+o.status),console.log(o),"logOut"===t?"loggedOut"===o.status?(Cookies.remove("sbm_token",{path:"/sabetmikonimv2"}),Cookies.remove("dId",{path:"/sabetmikonimv2"}),Cookies.remove("cId",{path:"/sabetmikonimv2"}),alert(checkCookie("sbm_token"))):swal({title:"خطا!",text:" خطایی رخ داده است! ",icon:"error",button:"تلاش مجدد"}):"securityError"===o.status?(Cookies.remove("sbm_token",{path:"/sabetmikonimv2"}),Cookies.remove("dId",{path:"/sabetmikonimv2"}),Cookies.remove("cId",{path:"/sabetmikonimv2"}),swal({title:"خطا!",text:" خطای امنیتی رخ داده است! ",icon:"error",button:"تلاش مجدد"}),setTimeout(function(){window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/"},800)):callbackAjaxReq(o,t)}).fail(function(o){$(".loadingBar").removeClass("active"),console.log("no! "+o.status),console.log(o),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",icon:"error",button:"تماس با پشتیبانی: ۲۸۴۲۵۷۳۳ - ۰۲۱"})})}$(document).ready(function(){var o=window.location.href;"cookieNotSet"===checkCookie("sbm_token")?(setCookie("redirect_url",o,1),window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/index.php?redirect=true"):"cookieSet"===checkCookie("sbm_token")||(setCookie("redirect_url",o,1),window.location.href="http://amins-macbook-pro.local:5757/sabetmikonimv2/index.php?redirect=true"),$("a[name=logOutPanel]").click(function(o){o.preventDefault();var e=getCookie("sbm_token"),t={cookie:e};ajaxReq(t,"http://api.sabetmikonim.com:8004/panel/logout/","logOut")})});