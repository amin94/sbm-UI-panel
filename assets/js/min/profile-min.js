function getCookie(e){for(var a=e+"=",s=document.cookie.split(";"),o=0;o<s.length;o++){for(var t=s[o];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(a))return t.substring(a.length,t.length)}return""}function checkCookie(e){var a=getCookie(e);return""!=a?"cookieSet":"cookieNotSet"}function callbackAjaxReq(e,a){"getProfileData"===a?"requestDone"===e.status?("False"===e.emailVerifyStatus&&($("#emailGroup").addClass("has-error"),$("#emailGroup").append('<div class="help-block"> ایمیل شما تایید نشده است! آن را حتما تایید کنید: <a href="javascript:;" name="resendActivitationEmail"> ارسال مجدد ایمیل فعالسازی </a> </div>')),$("input[name=userEmail]").val(e.userEmail),$("input[name=userName]").val(e.userName),$("input[name=userMobile]").val(e.userMobile)):swal({title:"خطا!",text:" خطایی رخ داده است! ",icon:"error",button:"تلاش مجدد"}):"updateProfileData"===a?"profileUpdated"===e.status?swal({title:"تبریک!",text:" پروفایل شما با موفقیت به روز گردید! ",icon:"success",button:"مرسی"}):swal({title:"خطا!",text:" خطایی رخ داده است! ",icon:"error",button:"تلاش مجدد"}):"resendActiveEmail"===a?swal({text:"ایمیل فعال‌سازی مجددا ارسال گردید!",icon:"success",button:"ایمیلتان را تایید نمایید"}):"updatePassword"===a&&("passwordChanged"===e.status?swal({title:"تبریک!",text:" رمز عبور شما با موفقیت به روز شد! ",icon:"success",button:"مرسی"}):"wrongPassword"===e.status&&($("#oldPassGroup").addClass("has-error"),$("#oldPassGroup").append('<div class="help-block"> رمز عبور فعلی‌تان اشتباه است! </div>')))}$(document).ready(function(){var e=getCookie("sbm_token"),a={cookie:e};ajaxReq(a,"https://api.sabetmikonim.com/panel/get-profile/","getProfileData"),$("#profileEditForm").submit(function(e){$(".form-group").removeClass("has-error"),$(".help-block").remove(),e.preventDefault();var a="false",s=getCookie("sbm_token"),o=$("input[name=userName]").val(),t=$("input[name=userMobile]").val();if(""===o&&(a="true",$("#nameGroup").addClass("has-error"),$("#nameGroup").append('<div class="help-block"> فیلد نام و نام خانوادگی نمی‌تواند خالی باشد! </div>')),""===t&&(a="true",$("#mobileGroup").addClass("has-error"),$("#mobileGroup").append('<div class="help-block"> فیلد شماره موبایل نمی‌تواند خالی باشد! </div>')),"false"===a){var r={cookie:s,userName:o,userMobile:t};ajaxReq(r,"https://api.sabetmikonim.com/panel/update-profile/","updateProfileData")}}),$("#changePassForm").submit(function(e){$(".form-group").removeClass("has-error"),$(".help-block").remove(),e.preventDefault();var a="false",s=getCookie("sbm_token"),o=$("input[name=oldPass]").val(),t=$("input[name=newPass]").val(),r=$("input[name=repeatNewPass]").val();if(""===o&&(a="true",$("#oldPassGroup").addClass("has-error"),$("#oldPassGroup").append('<div class="help-block"> رمز فعلی‌تان را وارد نمایید! </div>')),""===t&&(a="true",$("#newPass1Group").addClass("has-error"),$("#newPass1Group").append('<div class="help-block"> رمز جدید‌تان را وارد نمایید! </div>')),""===r&&(a="true",$("#repeatNewPassGroup").addClass("has-error"),$("#repeatNewPassGroup").append('<div class="help-block"> تکرار رمز عبور را وارد نمایید! </div>')),t!==r&&(a="true",$("#repeatNewPassGroup").addClass("has-error"),$("#repeatNewPassGroup").append('<div class="help-block"> تکرار رمز عبور با رمز عبور جدید شما متفاوت است! </div>')),"false"===a){var i={cookie:s,currentPassword:o,newPassword:t};ajaxReq(i,"https://api.sabetmikonim.com/panel/change-password/","updatePassword")}}),$("a[name=resendActivitationEmail]").click(function(e){e.preventDefault();var a=getCookie("sbm_token"),s=$("input[name=userEmail]").val(),o={email:s,cookie:a};ajaxReq(o,"https://api.sabetmikonim.com/accounts/resend-email/","resendActiveEmail")})});