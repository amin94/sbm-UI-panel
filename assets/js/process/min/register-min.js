function createView(e,t){console.log(e);var a={register:"http://amins-macbook-pro.local:5757/sabetmikonimv2/template/register.html",welcome:"http://amins-macbook-pro.local:5757/sabetmikonimv2/template/welcome.html","add-domain":"http://amins-macbook-pro.local:5757/sabetmikonimv2/template/add-domain.html"};"register"!==e.contentId&&$("#loginNav").hide(),"cookieSet"===checkCookie("sbm_token")?($("#registerContent").load(a[e.contentId],function(t){var a=e.contentId}),t&&History.pushState(e,e.title,"http://amins-macbook-pro.local:5757/sabetmikonimv2/register.php/?page="+e.contentId)):($("#registerContent").load(a.register,function(e){var t="register"}),History.pushState(e,e.title,"http://amins-macbook-pro.local:5757/sabetmikonimv2/register.php/?page=register"))}function setCookie(e,t,a){var n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3);var o="expires="+n.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}function getCookie(e){for(var t=e+"=",a=document.cookie.split(";"),n=0;n<a.length;n++){for(var o=a[n];" "==o.charAt(0);)o=o.substring(1);if(0==o.indexOf(t))return o.substring(t.length,o.length)}return""}function checkCookie(e){var t=getCookie(e);return""!=t?"cookieSet":"cookieNotSet"}function registerTabs(e){var t=e-1,a=!1;1!=e?""==$("input[name=email]").val()?(a=!1,alert("ایمیل را وارد نمایید."),$("#step"+(e-1)+" input[name=email]").addClass("error")):""==$("input[name=name]").val()?(a=!1,alert(" نام و نام خانوادگی را وارد نمایید. "),$("#step"+(e-1)+" input[name=name]").addClass("error")):""==$("input[name=passwd]").val()?(a=!1,alert(" رمز عبور را وارد نمایید. "),$("#step"+(e-1)+" input[name=passwd]").addClass("error")):""==$("input[name=mobile]").val()?(a=!1,alert("  شماره موبایل‌تان را وارد نمایید "),$("#step"+(e-1)+" input[name=mobile]").addClass("error")):(a=!0,$("#step1 input").removeClass("error")):a=!0,a&&($(".registerSteps").css({display:"none"}),$("#step"+e).css({display:"block"}),$(".stepItem").removeClass("active"),$("#stepItem"+e).addClass("active"),1==e?(document.getElementById("nextStep").setAttribute("onclick","campaignTabs("+(e+1)+")"),document.getElementById("preStep").setAttribute("onclick","campaignTabs("+e+")"),$("a[name=preStep]").css({display:"none"}),$("a[name=nextStep]").css({display:"block"}),$("button[name=submitForm]").css({display:"none"})):2==e||3==e||4==e?(document.getElementById("nextStep").setAttribute("onclick","campaignTabs("+(e+1)+")"),document.getElementById("preStep").setAttribute("onclick","campaignTabs("+(e-1)+")"),$("a[name=preStep]").css({display:"block"}),$("a[name=nextStep]").css({display:"block"}),$("button[name=submitForm]").css({display:"none"})):5==e&&(document.getElementById("preStep").setAttribute("onclick","campaignTabs("+(e-1)+")"),$("a[name=nextStep]").attr("href",e),$("a[name=preStep]").attr("href",+e-1),$("a[name=preStep]").css({display:"block"}),$("a[name=nextStep]").css({display:"none"}),$("button[name=submitForm]").css({display:"block"})),a=!1)}function past_exp(){$(".past_exp").fadeToggle("medium")}function merchant_info(){$(".merchant_info").fadeToggle("medium")}History.Adapter.bind(window,"statechange",function(){var e=History.getState();createView(e.data,!1)}),$(document).ready(function(){var e=window.location.href,t=new URL(e),a=t.searchParams.get("page");"null"!==a?createView({contentId:a,title:"ثبت نام در سرویس ثابت میکنیم!"},!0):createView({contentId:"register",title:"ثبت نام در سرویس ثابت میکنیم!"},!0),$("#registerForm").submit(function(e){var t="false";if(""===$("input[name=email]").val()&&($("#email_group").addClass("has-error"),$("#email_group").append('<div class="help-block"> لطفا ایمیل‌تان را وارد نمایید </div>'),t="true"),""===$("input[name=passwd]").val()&&($("#passwd_group").addClass("has-error"),$("#passwd_group").append('<div class="help-block"> لطفا رمز عبورتان وارد نمایید! </div>'),t="true"),""===$("input[name=name]").val()&&($("#name_group").addClass("has-error"),$("#name_group").append('<div class="help-block"> لطفا نام خودتان را وارد نمایید! </div>'),t="true"),""===$("input[name=mobile]").val()&&($("#mobile_group").addClass("has-error"),$("#mobile_group").append('<div class="help-block"> لطفا شماره موبایل‌تان را وارد نمایید </div>'),t="true"),"false"===t){$(".loadingBar").addClass("active"),$(".form-group").removeClass("has-error"),$(".help-block").remove();var a={updatePackage:"false",name:$("input[name=name]").val(),mobile:$("input[name=mobile]").val(),email:$("input[name=email]").val(),password:$("input[name=passwd]").val()};verifyData=JSON.stringify(a),sendData={x:verifyData},$.ajax({type:"POST",url:"https://api.sabetmikonim.com/accounts/register/",data:sendData,dataType:"json",async:!0,encode:!0}).done(function(e){$(".loadingBar").removeClass("active"),console.log(e),"dpEmail"===e.status?($("#email_group").addClass("has-error"),$("#email_group").append('<div class="help-block"> ایمیل شما تکراری است! لطفا از <a href="http://amins-macbook-pro.local:5757/sabetmikonimv2/index.php/"> اینجا </a> وارد شوید! </div>')):(setCookie("sbm_token",e.cookie,1),setCookie("userEmail",a.email,1),createView({contentId:"welcome",title:"به سرویس ثابت میکنیم خوش آمدید!"},!0))}).fail(function(e){$(".loadingBar").removeClass("active"),console.log(e),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",icon:"warning",button:"لطفا یکبار دیگر امتحان کنید"})})}e.preventDefault()}),$("a[name=registerStepLink]").click(function(e){e.preventDefault()}),$("a[name=resendEmail]").click(function(){$(".loadingBar").addClass("active");var e=getCookie("sbm_token"),t=getCookie("userEmail"),a={email:t,cookie:e};verifyData=JSON.stringify(a),sendData={x:verifyData},$.ajax({type:"POST",url:"https://api.sabetmikonim.com/accounts/resend-email/",data:sendData,dataType:"json",encode:!0,async:!0}).done(function(e){console.log(a),console.log(e),$(".loadingBar").removeClass("active"),"emailReSent"===e.status&&swal({text:"ایمیل فعال‌سازی مجددا ارسال گردید!",icon:"success",button:"ایمیلتان را تایید نمایید"})}).fail(function(e){console.log(e),$(".submit_txt").delay(200).fadeIn("fast"),$(".process_txt").fadeOut("fast"),$(".signup_btn").addClass("btn-primary"),$(".signup_btn").removeClass("signup_btn_process"),swal({title:"خطا!",text:"متاسفانه ارتباط با سرور قطع شده است.",icon:"warning",button:"لطفا یکبار دیگر امتحان کنید"})})})});